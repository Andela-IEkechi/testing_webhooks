<h3>API keys</h3>

<%= simple_nested_form_for(@project, :url => project_path(@project), :method => :put, :html => {:class=>'form-horizontal'}) do |f| %>
  <%= f.simple_fields_for :api_keys do |k_form| %>
    <div class="well top-padding">
      <%= k_form.input :name do %>
        <%= k_form.input_field :name %>
        <%= content_tag(:strong, k_form.object.token) if k_form.object.token %>
        <%= content_tag(:span, 'a new key will be generated when you save the project') unless k_form.object.token %>
      <% end %>
      <%= k_form.hidden_field :token %>
      <%= k_form.input ' ' do %>
        <%= k_form.link_to_remove "remove", :class => 'btn btn-warning', :title => 'Revoke this key'  %>
      <% end %>
    </div>
  <% end %>
  <%= f.link_to_add "Add a key", :api_keys, :class => 'btn btn-success offset2' %>

  <div class="form-actions">
    <%= f.submit :class=>'btn' %>
    <%= link_to 'cancel', project_path(@project), :class => 'btn' %>
  </div>
<% end %>
